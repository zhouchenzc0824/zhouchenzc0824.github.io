<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Docker Configuration</title>
  <meta name="description" content="  Docker is a powerful and, at the same time, a lightweight tool with extrem flexibility and portability for DevOps Engineer or Software Engineer to make app...">
  <meta name="author" content="Mr.Zhou">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Docker Configuration">
  <meta name="twitter:description" content="  Docker is a powerful and, at the same time, a lightweight tool with extrem flexibility and portability for DevOps Engineer or Software Engineer to make app...">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="Docker Configuration">
  <meta property="og:description" content="  Docker is a powerful and, at the same time, a lightweight tool with extrem flexibility and portability for DevOps Engineer or Software Engineer to make app...">
  
  <link rel="icon" type="image/jpg" href="/assets/images/favicon.jpg"/>
  <link href=/assets/images/favicon.jpg rel="shortcut icon" type="image/jpg">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://zhouchenzc0824.github.io/2017/05/Docker-Confuguration/">
  <link rel="alternate" type="application/rss+xml" title="My Dreamland" href="http://zhouchenzc0824.github.io/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url(/assets/images/background-cover.jpg)"> 
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="https://zhouchenzc0824.github.io/" title="Go to My Dreamland Homepage" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="My Dreamland logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to Blog for My Dreamland" class="blog-button">My Dreamland</a></h1>

        
        <span class="panel-cover__subtitle panel-subtitle">Wellcome to My Homepage</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">Software Engineer,Traveller,Basketballer and Music Lover</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
		
        
        <p class="panel-cover__description">The time is limited, so don't waste it living someone else's life. Don't be trapped by dogma.</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="Visit My Blog" class="blog-button">Blog</a></li>
                
                  <li class="navigation__item"><a href="http://zhouchenzc0824.github.io/myProjects" target="_blank" title="My Projects">Projects</a></li>
                
                  <li class="navigation__item"><a href="http://zhouchenzc0824.github.io/aboutMe" target="_blank" title="Learn Me More And Have Fun">About Me</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  
  <!-- Weibo -->

  <li class="navigation__item">
    <a href="http://weibo.com/zhouchenzc" title="@Weibo" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>
  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/zhouchenzc0824" title="@Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  

  

      
        
<!--   Instagram -->
  <li class="navigation__item">
    <a href="https://www.instagram.com/zhouchenzcins" title="@Instagram" target="_blank">
      <i class='social fa fa-instagram'></i>
      <span class="label">Instagram</span>
    </a>
  </li>
  
      
      
  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:zhouchenzc0824@gmail.com" title="Contact Me Via Email">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  
      

<!--  
-->
      
<!--   RSS -->
<!--

  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

-->

<!--  
-->


  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-disabled"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2017-05-05 14:53:11 -0400" itemprop="datePublished" class="post-meta__date date">2017-05-05</time> &#8226; <span class="post-meta__tags tags">Docker</span>
    </div>
    <h1 class="post-title">Docker Configuration</h1>
  </header>

  <section class="post">
    <blockquote>
  <p>Docker is a powerful and, at the same time, a lightweight tool with extrem flexibility and portability for DevOps Engineer or Software Engineer to make application environment configurationa and testing easy and fast.</p>
</blockquote>

<p>I am not gonna talk about the general configuration for different OS since there are so many tutorials avaliable online for learners. Follow it step by step then you can work it out.I just want to elaborate on some weird issues that I came across.</p>

<p>No matter what OS you use, after succsessfully complete <strong>Docker</strong> installation, you can try typing <code class="highlighter-rouge">docker version</code> that it means it is installed properlly when pop up the message on command prompt,</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Client:
  Version: ...
  API version: ...
  Go version:
  Git commit: ...
  Built: ...
  OS/Arch: ...
Server:
  Version: ...
  API version: ...
  Git commit: ...
  Go version:
  Built: ...
  OS/Arch: ...
  Experimental: ...
</code></pre>
</div>

<p>Otherwise you need to reinstall <strong>Docker</strong></p>

<p>Or it may seem like this without Client information</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Server:
  Version: ...
  API version: ...
  Git commit: ...
  Go version:
  Built: ...
  OS/Arch: ...
  Experimental: ...
</code></pre>
</div>

<p>Then restart the service, <code class="highlighter-rouge">service docker restart</code>, it should be normal.
Otherwise go reinstalling the whole thing and try it again.</p>

<p>After finish installation part, then you may have to try create your first container based off of your first image.
<code class="highlighter-rouge">docker pull *</code> replace <code class="highlighter-rouge">*</code> with any image name (e.g. mysql, unbuntu etc) that can be found in <strong>Docker Store</strong> or <strong>Docker Hub</strong>.
<code class="highlighter-rouge">docker search *</code>replace <code class="highlighter-rouge">*</code> with any image name (e.g. mysql, unbuntu etc).</p>

<p>It is recommended that you go to these places using browser with more specifics in <strong>Docker Hub</strong> and <strong>Docker Store</strong>.</p>

<p>For example you have a windows machine and you want to dockerize a linux OS like alpine(a lightweight OS with only 4MB listed as one of the most popular Linux OS), then try
<code class="highlighter-rouge">docker pull apline</code>
or
<code class="highlighter-rouge">docker run -it alpine</code>
If alpine is not locally installed, it will do <code class="highlighter-rouge">docker pull alpine:latest</code> unless you specify the version like <code class="highlighter-rouge">docker pull alpine:3.5</code> behind the scenes then run a terminal on alpine OS.</p>

<p>The weird thing is that when I try to build and pubulish the python app, it failed with message like this</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Sending build context to Docker daemon   7.68kB
Step 1/8 : FROM alpine
 ---&gt; 665ffb03bfae
Step 2/8 : RUN apk add --update py2-pip
 ---&gt; Running in 9e963eb5c93c
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/community/x86_64/APKINDEX.tar.gz
ERROR: http://dl-cdn.alpinelinux.org/alpine/v3.6/main: temporary error (try again later)
WARNING: Ignoring APKINDEX.84815163.tar.gz: No such file or directory
ERROR: http://dl-cdn.alpinelinux.org/alpine/v3.6/community: temporary error (try again later)
WARNING: Ignoring APKINDEX.24d64ab1.tar.gz: No such file or directory
ERROR: unsatisfiable constraints:
  py2-pip (missing):
    required by: world[py2-pip]
The command '/bin/sh -c apk add --update py2-pip' returned a non-zero code: 1
</code></pre>
</div>

<p>which means it cannot install pip and python on alpine.
After I test the cdn link, it is actully valid.</p>

<p>My troubleshooting process is that let me try the same thing in different containers with diffrent OS and it goes to failure everytime.</p>

<p>I start thinking it could be the internet connection that is block from inside the container as I have connection on my host OS.</p>

<p>Then I try the following things:</p>

<p>I use <code class="highlighter-rouge">apk update</code> to fetch the cdn address and refresh the list on alpine, failed with same log.
I use <code class="highlighter-rouge">yum update</code> on CentOs, failed with the same log.</p>

<p>Then issue comfirmed that it has something to do with connection from inside container.</p>

<p>I guess it is something acting strange that the DNS server the docker is using lets containers resolve onto the internet.</p>

<p>So I go for the docker DNS configuration file. First locate the DNS configuration in /etc/default/docker, it shows info</p>

<div class="highlighter-rouge"><pre class="highlight"><code># Docker Upstart and SysVinit configuration file

#
# THIS FILE DOES NOT APPLY TO SYSTEMD
#
#   Please see the documentation for "systemd drop-ins":
#   https://docs.docker.com/engine/admin/systemd/
#

# Customize location of Docker binary (especially for development testing).
# DOCKERD="/usr/local/bin/dockerd"

# Use DOCKER_OPTS to modify the daemon startup options.
  DOCKER_OPTS="--dns 8.8.8.8 --dns 8.8.4.4"

# If you need Docker to use an HTTP proxy, it can also be specified here.
# export http_proxy="http://127.0.0.1:3128/"

# This is also a handy place to tweak where Docker's temporary files go.
# export DOCKER_TMPDIR="/mnt/bigdrive/docker-tmp"
</code></pre>
</div>

<p>Uncomment the <code class="highlighter-rouge">DOCKER_OPTS="--dns 8.8.8.8 --dns 8.8.4.4"</code> then Restart the service <code class="highlighter-rouge">service docker restart</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>Boom, it works fine now, you are wellcome.
</code></pre>
</div>


  </section>
</article>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- OneV's Den -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3324997515191619"
     data-ad-slot="9170309685"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<section class="read-more">
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">Earlier Post</span>
       <h2 class="post-list__post-title post-title"><a href="/2017/03/The-Road-Trip/" title="link to The Road Trip">The Road Trip</a></h2>
       <p class="excerpt">  最近去了一些很好玩的地方，其中最想说的是Hot springs national park and Great smoky mountains national park.我对于大自然一直是有一种敬畏感，但是又十分的愿意去探索她的美。因为作为一个爱到处浪，到处旅游的人，国家公园是一个必然的选择。Hot springs 历史悠久，号称是比黄石还早的第一个国家公园。与其说是公园，不如说是一个旅游度假小镇。因为其特殊的地理位置和条件，有自然的热泉水从地底喷出来，甚至在路边都有可以直接用水瓶接...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-03-28 12:35:11 -0400" class="post-list__meta--date date">2017-03-28</time> &#8226; <span class="post-list__meta--tags tags">Road Trip</span><a class="btn-border-small" href=/2017/03/The-Road-Trip/>Read More</a></div>
   </div>
   
</section>

<section class="post-comments">
  
    <div id="disqus_thread"></div>
    <script>
    
    var disqus_config = function () {
        this.page.url = "http://zhouchenzc0824.github.io/2017/05/Docker-Confuguration/";
        this.page.identifier = "/2017/05/Docker-Confuguration/";
    };

    var disqus_shortname = 'Mr.zhou';
    
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>To comment with <a href="http://disqus.com/?ref_noscript"> Disqus </a>please enable JavaScript </noscript>
    
  
  
  
  
</section>


            <section class="footer">
    <footer>
        <span class="footer__copyright">Theme by 
            <a href="https://github.com/onevcat/" target="_blank">Vno - Jekyll</a>  - &copy; 2017</span>
        
        <span class="footer__copyright">The site created and updated by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> on 2017-06-26 </span>
    </footer>
</section>

<!--
        <span class="footer__copyright">Theme createdby <a href="http://zhouchenzc0824.github.io">@Mr.Zhou</a> ， 
-->

<!--
<span class="footer__copyright">Under License of <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CCA and ShareAlike 4.0 International</a></span>
-->

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" src="/js/main.js"></script>


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-92284523-1', 'zhouchenzc0824.github.io');
    ga('send', 'pageview');
</script>


    
  </body>

</html>
